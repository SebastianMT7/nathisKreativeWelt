<section class="sidebar">
    <!-- Hauptkategorie-Ebene -->
    @if (currentLevel === 0) {
    <ul>
        <li class="sidebar-head">
            <span>Hauptkategorien</span>
            <button class="close-btn" (click)="closeSidebar()">×</button>
        </li>

        @for (category of categories; track $index) {
        <li class="sidebar-item" [ngStyle]="{'justify-content': category.subcategories.length > 0  ? 'space-between' : 'flex-end'}" 
             (click)="handleCategoryClick(category)">
            <!-- (click)=" category.subcategories.length > 0 ? selectCategory(category) : filterByCategory(category.name)"> -->
            @if (category.subcategories.length > 0) {
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px"
                height="20px" viewBox="0 0 20 20" version="1.1">
                <g id="surface1">
                    <path
                        d="M 12.542969 3.503906 C 13.066406 3.738281 13.492188 4.089844 13.75 4.609375 C 13.789062 4.8125 13.789062 4.8125 13.75 5.078125 C 13.59375 5.308594 13.398438 5.503906 13.203125 5.703125 C 13.09375 5.828125 12.980469 5.949219 12.871094 6.074219 C 12.566406 6.414062 12.257812 6.75 11.949219 7.085938 C 11.707031 7.347656 11.472656 7.613281 11.242188 7.882812 C 11.050781 8.09375 10.859375 8.304688 10.664062 8.515625 C 10.195312 9.027344 9.738281 9.542969 9.296875 10.078125 C 9.398438 10.304688 9.507812 10.464844 9.683594 10.636719 C 9.730469 10.683594 9.777344 10.730469 9.824219 10.777344 C 9.875 10.828125 9.925781 10.878906 9.980469 10.929688 C 10.03125 10.980469 10.082031 11.03125 10.136719 11.085938 C 10.304688 11.25 10.472656 11.417969 10.640625 11.582031 C 10.804688 11.746094 10.972656 11.910156 11.136719 12.074219 C 11.242188 12.175781 11.34375 12.277344 11.449219 12.378906 C 11.746094 12.675781 12.023438 12.980469 12.300781 13.296875 C 12.445312 13.464844 12.601562 13.617188 12.761719 13.769531 C 12.820312 13.824219 12.878906 13.878906 12.9375 13.9375 C 13.058594 14.050781 13.175781 14.164062 13.296875 14.277344 C 13.5625 14.535156 13.730469 14.699219 13.839844 15.058594 C 13.820312 15.472656 13.625 15.710938 13.359375 16.015625 C 12.945312 16.390625 12.476562 16.628906 11.910156 16.617188 C 11.488281 16.496094 11.214844 16.105469 10.9375 15.78125 C 10.890625 15.730469 10.84375 15.675781 10.796875 15.625 C 10.710938 15.523438 10.625 15.425781 10.539062 15.328125 C 10.355469 15.113281 10.164062 14.90625 9.96875 14.695312 C 9.585938 14.28125 9.207031 13.859375 8.828125 13.4375 C 8.710938 13.308594 8.59375 13.175781 8.476562 13.046875 C 7.773438 12.265625 7.773438 12.265625 7.597656 12.070312 C 7.480469 11.9375 7.359375 11.808594 7.242188 11.675781 C 6.957031 11.363281 6.671875 11.046875 6.402344 10.722656 C 6.355469 10.667969 6.3125 10.617188 6.265625 10.5625 C 6.136719 10.328125 6.136719 10.183594 6.171875 9.921875 C 6.296875 9.722656 6.296875 9.722656 6.46875 9.527344 C 6.566406 9.414062 6.566406 9.414062 6.664062 9.300781 C 6.714844 9.242188 6.714844 9.242188 6.769531 9.183594 C 6.914062 9.019531 7.054688 8.851562 7.195312 8.683594 C 7.304688 8.554688 7.414062 8.425781 7.523438 8.296875 C 7.710938 8.074219 7.898438 7.847656 8.082031 7.621094 C 8.390625 7.242188 8.707031 6.871094 9.027344 6.5 C 9.324219 6.15625 9.609375 5.808594 9.894531 5.457031 C 10.152344 5.144531 10.417969 4.839844 10.683594 4.53125 C 10.898438 4.28125 11.105469 4.03125 11.296875 3.765625 C 11.621094 3.332031 12.046875 3.339844 12.542969 3.503906 Z M 12.542969 3.503906 " />
                </g>
            </svg>
        }
            <p>{{ category.name }}</p>
        </li>
        }
    </ul>
    }

    <!-- Unterkategorie-Ebene -->
    @if (currentLevel === 1) {
    <ul>
        <li class="sidebar-head">
            <svg (click)="goBack()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                width="20px" height="20px" viewBox="0 0 20 20" version="1.1">
                <g id="surface1">
                    <path
                        d="M 12.542969 3.503906 C 13.066406 3.738281 13.492188 4.089844 13.75 4.609375 C 13.789062 4.8125 13.789062 4.8125 13.75 5.078125 C 13.59375 5.308594 13.398438 5.503906 13.203125 5.703125 C 13.09375 5.828125 12.980469 5.949219 12.871094 6.074219 C 12.566406 6.414062 12.257812 6.75 11.949219 7.085938 C 11.707031 7.347656 11.472656 7.613281 11.242188 7.882812 C 11.050781 8.09375 10.859375 8.304688 10.664062 8.515625 C 10.195312 9.027344 9.738281 9.542969 9.296875 10.078125 C 9.398438 10.304688 9.507812 10.464844 9.683594 10.636719 C 9.730469 10.683594 9.777344 10.730469 9.824219 10.777344 C 9.875 10.828125 9.925781 10.878906 9.980469 10.929688 C 10.03125 10.980469 10.082031 11.03125 10.136719 11.085938 C 10.304688 11.25 10.472656 11.417969 10.640625 11.582031 C 10.804688 11.746094 10.972656 11.910156 11.136719 12.074219 C 11.242188 12.175781 11.34375 12.277344 11.449219 12.378906 C 11.746094 12.675781 12.023438 12.980469 12.300781 13.296875 C 12.445312 13.464844 12.601562 13.617188 12.761719 13.769531 C 12.820312 13.824219 12.878906 13.878906 12.9375 13.9375 C 13.058594 14.050781 13.175781 14.164062 13.296875 14.277344 C 13.5625 14.535156 13.730469 14.699219 13.839844 15.058594 C 13.820312 15.472656 13.625 15.710938 13.359375 16.015625 C 12.945312 16.390625 12.476562 16.628906 11.910156 16.617188 C 11.488281 16.496094 11.214844 16.105469 10.9375 15.78125 C 10.890625 15.730469 10.84375 15.675781 10.796875 15.625 C 10.710938 15.523438 10.625 15.425781 10.539062 15.328125 C 10.355469 15.113281 10.164062 14.90625 9.96875 14.695312 C 9.585938 14.28125 9.207031 13.859375 8.828125 13.4375 C 8.710938 13.308594 8.59375 13.175781 8.476562 13.046875 C 7.773438 12.265625 7.773438 12.265625 7.597656 12.070312 C 7.480469 11.9375 7.359375 11.808594 7.242188 11.675781 C 6.957031 11.363281 6.671875 11.046875 6.402344 10.722656 C 6.355469 10.667969 6.3125 10.617188 6.265625 10.5625 C 6.136719 10.328125 6.136719 10.183594 6.171875 9.921875 C 6.296875 9.722656 6.296875 9.722656 6.46875 9.527344 C 6.566406 9.414062 6.566406 9.414062 6.664062 9.300781 C 6.714844 9.242188 6.714844 9.242188 6.769531 9.183594 C 6.914062 9.019531 7.054688 8.851562 7.195312 8.683594 C 7.304688 8.554688 7.414062 8.425781 7.523438 8.296875 C 7.710938 8.074219 7.898438 7.847656 8.082031 7.621094 C 8.390625 7.242188 8.707031 6.871094 9.027344 6.5 C 9.324219 6.15625 9.609375 5.808594 9.894531 5.457031 C 10.152344 5.144531 10.417969 4.839844 10.683594 4.53125 C 10.898438 4.28125 11.105469 4.03125 11.296875 3.765625 C 11.621094 3.332031 12.046875 3.339844 12.542969 3.503906 Z M 12.542969 3.503906 " />
                </g>
            </svg>
            <p (click)="goBack()"> {{currentCategory}}</p>
            <button class="close-btn" (click)="closeSidebar()">×</button>
        </li>
        @for (sub of selectedCategory?.subcategories; track $index) {
        <li class="sidebar-item" [ngStyle]="{'justify-content': sub.subcategories ? 'space-between' : 'flex-end'}" 
        (click)="handleSubCategoryClick(sub)">
            <!-- (click)="sub.subcategories ? selectSubCategory(sub) : filterByCategory(filterMainCategory,sub.name)"> -->
            @if (sub.subcategories) {
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20px"
                    height="20px" viewBox="0 0 20 20" version="1.1">
                    <g id="surface1">
                        <path
                            d="M 12.542969 3.503906 C 13.066406 3.738281 13.492188 4.089844 13.75 4.609375 C 13.789062 4.8125 13.789062 4.8125 13.75 5.078125 C 13.59375 5.308594 13.398438 5.503906 13.203125 5.703125 C 13.09375 5.828125 12.980469 5.949219 12.871094 6.074219 C 12.566406 6.414062 12.257812 6.75 11.949219 7.085938 C 11.707031 7.347656 11.472656 7.613281 11.242188 7.882812 C 11.050781 8.09375 10.859375 8.304688 10.664062 8.515625 C 10.195312 9.027344 9.738281 9.542969 9.296875 10.078125 C 9.398438 10.304688 9.507812 10.464844 9.683594 10.636719 C 9.730469 10.683594 9.777344 10.730469 9.824219 10.777344 C 9.875 10.828125 9.925781 10.878906 9.980469 10.929688 C 10.03125 10.980469 10.082031 11.03125 10.136719 11.085938 C 10.304688 11.25 10.472656 11.417969 10.640625 11.582031 C 10.804688 11.746094 10.972656 11.910156 11.136719 12.074219 C 11.242188 12.175781 11.34375 12.277344 11.449219 12.378906 C 11.746094 12.675781 12.023438 12.980469 12.300781 13.296875 C 12.445312 13.464844 12.601562 13.617188 12.761719 13.769531 C 12.820312 13.824219 12.878906 13.878906 12.9375 13.9375 C 13.058594 14.050781 13.175781 14.164062 13.296875 14.277344 C 13.5625 14.535156 13.730469 14.699219 13.839844 15.058594 C 13.820312 15.472656 13.625 15.710938 13.359375 16.015625 C 12.945312 16.390625 12.476562 16.628906 11.910156 16.617188 C 11.488281 16.496094 11.214844 16.105469 10.9375 15.78125 C 10.890625 15.730469 10.84375 15.675781 10.796875 15.625 C 10.710938 15.523438 10.625 15.425781 10.539062 15.328125 C 10.355469 15.113281 10.164062 14.90625 9.96875 14.695312 C 9.585938 14.28125 9.207031 13.859375 8.828125 13.4375 C 8.710938 13.308594 8.59375 13.175781 8.476562 13.046875 C 7.773438 12.265625 7.773438 12.265625 7.597656 12.070312 C 7.480469 11.9375 7.359375 11.808594 7.242188 11.675781 C 6.957031 11.363281 6.671875 11.046875 6.402344 10.722656 C 6.355469 10.667969 6.3125 10.617188 6.265625 10.5625 C 6.136719 10.328125 6.136719 10.183594 6.171875 9.921875 C 6.296875 9.722656 6.296875 9.722656 6.46875 9.527344 C 6.566406 9.414062 6.566406 9.414062 6.664062 9.300781 C 6.714844 9.242188 6.714844 9.242188 6.769531 9.183594 C 6.914062 9.019531 7.054688 8.851562 7.195312 8.683594 C 7.304688 8.554688 7.414062 8.425781 7.523438 8.296875 C 7.710938 8.074219 7.898438 7.847656 8.082031 7.621094 C 8.390625 7.242188 8.707031 6.871094 9.027344 6.5 C 9.324219 6.15625 9.609375 5.808594 9.894531 5.457031 C 10.152344 5.144531 10.417969 4.839844 10.683594 4.53125 C 10.898438 4.28125 11.105469 4.03125 11.296875 3.765625 C 11.621094 3.332031 12.046875 3.339844 12.542969 3.503906 Z M 12.542969 3.503906 " />
                    </g>
                </svg>
            }
            <p>{{ sub.name }}</p>
        </li>
        }
    </ul>
    }

    <!-- Unter-Unterkategorie-Ebene -->
    @if (currentLevel === 2) {
    <ul>
        <li class="sidebar-head">
            <svg (click)="goBack()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                width="20px" height="20px" viewBox="0 0 20 20" version="1.1">
                <g id="surface1">
                    <path
                        d="M 12.542969 3.503906 C 13.066406 3.738281 13.492188 4.089844 13.75 4.609375 C 13.789062 4.8125 13.789062 4.8125 13.75 5.078125 C 13.59375 5.308594 13.398438 5.503906 13.203125 5.703125 C 13.09375 5.828125 12.980469 5.949219 12.871094 6.074219 C 12.566406 6.414062 12.257812 6.75 11.949219 7.085938 C 11.707031 7.347656 11.472656 7.613281 11.242188 7.882812 C 11.050781 8.09375 10.859375 8.304688 10.664062 8.515625 C 10.195312 9.027344 9.738281 9.542969 9.296875 10.078125 C 9.398438 10.304688 9.507812 10.464844 9.683594 10.636719 C 9.730469 10.683594 9.777344 10.730469 9.824219 10.777344 C 9.875 10.828125 9.925781 10.878906 9.980469 10.929688 C 10.03125 10.980469 10.082031 11.03125 10.136719 11.085938 C 10.304688 11.25 10.472656 11.417969 10.640625 11.582031 C 10.804688 11.746094 10.972656 11.910156 11.136719 12.074219 C 11.242188 12.175781 11.34375 12.277344 11.449219 12.378906 C 11.746094 12.675781 12.023438 12.980469 12.300781 13.296875 C 12.445312 13.464844 12.601562 13.617188 12.761719 13.769531 C 12.820312 13.824219 12.878906 13.878906 12.9375 13.9375 C 13.058594 14.050781 13.175781 14.164062 13.296875 14.277344 C 13.5625 14.535156 13.730469 14.699219 13.839844 15.058594 C 13.820312 15.472656 13.625 15.710938 13.359375 16.015625 C 12.945312 16.390625 12.476562 16.628906 11.910156 16.617188 C 11.488281 16.496094 11.214844 16.105469 10.9375 15.78125 C 10.890625 15.730469 10.84375 15.675781 10.796875 15.625 C 10.710938 15.523438 10.625 15.425781 10.539062 15.328125 C 10.355469 15.113281 10.164062 14.90625 9.96875 14.695312 C 9.585938 14.28125 9.207031 13.859375 8.828125 13.4375 C 8.710938 13.308594 8.59375 13.175781 8.476562 13.046875 C 7.773438 12.265625 7.773438 12.265625 7.597656 12.070312 C 7.480469 11.9375 7.359375 11.808594 7.242188 11.675781 C 6.957031 11.363281 6.671875 11.046875 6.402344 10.722656 C 6.355469 10.667969 6.3125 10.617188 6.265625 10.5625 C 6.136719 10.328125 6.136719 10.183594 6.171875 9.921875 C 6.296875 9.722656 6.296875 9.722656 6.46875 9.527344 C 6.566406 9.414062 6.566406 9.414062 6.664062 9.300781 C 6.714844 9.242188 6.714844 9.242188 6.769531 9.183594 C 6.914062 9.019531 7.054688 8.851562 7.195312 8.683594 C 7.304688 8.554688 7.414062 8.425781 7.523438 8.296875 C 7.710938 8.074219 7.898438 7.847656 8.082031 7.621094 C 8.390625 7.242188 8.707031 6.871094 9.027344 6.5 C 9.324219 6.15625 9.609375 5.808594 9.894531 5.457031 C 10.152344 5.144531 10.417969 4.839844 10.683594 4.53125 C 10.898438 4.28125 11.105469 4.03125 11.296875 3.765625 C 11.621094 3.332031 12.046875 3.339844 12.542969 3.503906 Z M 12.542969 3.503906 " />
                </g>
            </svg>
            <p (click)="goBack()"> {{currentCategory}}</p>
            <button class="close-btn" (click)="closeSidebar()">×</button>
        </li>
        @for (subSub of selectedSubCategory?.subcategories; track $index) {
        <li class="sidebar-item" [ngStyle]="{'justify-content': subSub.subcategories ? 'space-between' : 'flex-end'}" 
        (click)="handleSubCategoryClick(subSub)">
        <!-- (click)="subSub.subcategories ? selectSubSubCategory(subSub) : filterByCategory(filterMainCategory,subSub.name)"> -->
            {{ subSub.name }}
        </li>
        }
    </ul>
    }
</section>